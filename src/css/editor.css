@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom styles for the novel editor UI */
.resize-handle {
    @apply absolute bottom-0 right-0 w-4 h-4 cursor-se-resize;
    /* A visual indicator can be added via a background image or pseudo-element if desired */
}

.resize-handle::after {
    content: '';
    @apply absolute bottom-1 right-1 w-2 h-2 border-r-2 border-b-2 border-gray-400;
}

.dark .resize-handle::after {
    @apply border-gray-500;
}

.window-minimized {
    @apply h-10 shadow-lg cursor-pointer;
}

.dragging {
    @apply transition-none !important;
}

.active .window-title-bar {
    @apply bg-indigo-200 dark:bg-indigo-900/70;
}

.active .window-title-bar .font-bold {
    @apply text-black dark:text-white;
}

.selected {
    @apply ring-2 ring-blue-500;
}

#desktop {
    /* Provides a subtle grid background for the canvas */
    background-image:
            linear-gradient(to right, theme('colors.gray.200') 1px, transparent 1px),
            linear-gradient(to bottom, theme('colors.gray.200') 1px, transparent 1px);
    background-size: 20px 20px;
    cursor: grab;
    /* Hint to the browser that these properties will change, allowing for optimization */
    will-change: transform, top, left;
}

.dark #desktop {
    background-image:
            linear-gradient(to right, theme('colors.gray.800') 1px, transparent 1px),
            linear-gradient(to bottom, theme('colors.gray.800') 1px, transparent 1px);
}

#viewport.panning #desktop {
    cursor: grabbing;
}

/* Set default cursor for windows to pointer, and text cursor for editable fields. */
.window-element {
    cursor: pointer;
}
/* MODIFIED: Point cursor to ProseMirror editor */
.window-element .ProseMirror {
    cursor: text;
}

/* Styles for the top toolbar */
#top-toolbar .js-toolbar-btn {
    @apply p-2 rounded text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors;
}

#top-toolbar .js-toolbar-btn:disabled {
    @apply text-gray-400 dark:text-gray-500 bg-transparent cursor-not-allowed hover:bg-transparent dark:hover:bg-transparent;
}

/* NEW: Style for active (toggled) toolbar buttons */
#top-toolbar .js-toolbar-btn.active {
    @apply bg-gray-300 dark:bg-gray-600;
}

#top-toolbar .js-toolbar-btn svg {
    @apply w-4 h-4;
}

/* NEW: Styles for highlighted text spans */
.highlight-yellow {
    background-color: #fef08a;
    color: #713f12;
}
.highlight-green {
    background-color: #a7f3d0;
    color: #14532d;
}
.highlight-blue {
    background-color: #bfdbfe;
    color: #1e3a8a;
}
.highlight-red {
    background-color: #fecaca;
    color: #7f1d1d;
}

/* NEW: Styles for ProseMirror editor */
.ProseMirror {
    @apply h-full focus:outline-none;
}

.ProseMirror p.is-editor-empty:first-child::before {
    content: attr(data-placeholder);
    float: left;
    @apply text-gray-400 dark:text-gray-500 italic pointer-events-none h-0;
}

/* Ensure prose styles apply inside the editor without extra padding or focus rings */
.prose .ProseMirror {
    @apply p-0 focus:ring-0;
}

/* NEW: Custom scrollbar styles for dark mode */
/* For Webkit-based browsers (Chrome, Safari, Edge) */
.dark ::-webkit-scrollbar {
    @apply w-3 h-3;
}

.dark ::-webkit-scrollbar-track {
    @apply bg-gray-800;
}

.dark ::-webkit-scrollbar-thumb {
    @apply bg-gray-600 rounded-full border-2 border-solid border-gray-800;
}

.dark ::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-500;
}

/* For Firefox */
.dark .overflow-auto,
.dark .overflow-y-auto {
    scrollbar-width: thin;
    scrollbar-color: theme('colors.gray.600') theme('colors.gray.800');
}

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline';">
	<title>Create a New Novel</title>
	<link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200">
<div class="container mx-auto p-8 max-w-3xl">
	<div class="text-center mb-8">
		<h1 class="text-4xl font-bold">Create a new Novel</h1>
		<p class="text-lg text-gray-600 dark:text-gray-400">Let's get your next masterpiece started.</p>
	</div>
	
	<form id="createNovelForm" class="bg-white dark:bg-gray-800 p-8 rounded-lg shadow-lg space-y-6">
		<!-- Title -->
		<div>
			<label for="title" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Title</label>
			<div class="mt-1 flex rounded-md shadow-sm">
				<input type="text" id="title" name="title" class="flex-1 block w-full rounded-none rounded-l-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500" required>
				<button type="button" id="surprise-me-btn" class="inline-flex items-center px-4 py-2 border border-l-0 border-gray-300 dark:border-gray-600 rounded-r-md bg-gray-50 dark:bg-gray-700/50 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">
					Surprise me
				</button>
			</div>
		</div>
		
		<!-- Author -->
		<div>
			<label for="author" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Author / Pen name</label>
			<div class="mt-1 flex rounded-md shadow-sm relative">
				<input type="text" id="author" name="author" class="flex-1 block w-full rounded-none rounded-l-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500" required>
				<button type="button" id="author-dropdown-btn" class="inline-flex items-center px-3 py-2 border border-l-0 border-gray-300 dark:border-gray-600 rounded-r-md bg-gray-50 dark:bg-gray-700/50 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">
					Select
					<svg class="ml-2 -mr-1 h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
				</button>
				<div id="author-dropdown-menu" class="hidden origin-top-right absolute right-0 mt-12 w-56 rounded-md shadow-lg bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-5 focus:outline-none z-10">
					<ul id="author-list" class="py-1">
						<!-- Author list populated by JS -->
					</ul>
				</div>
			</div>
		</div>
		
		<!-- Series -->
		<div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-end">
			<div class="md:col-span-2">
				<label for="series_id" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Series (optional)</label>
				<div class="mt-1 flex rounded-md shadow-sm">
					<select id="series_id" name="series_id" class="flex-1 block w-full rounded-none rounded-l-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500">
						<option value="">â€”</option>
						<!-- Series options loaded by JS -->
					</select>
					<button type="button" id="new-series-btn" class="inline-flex items-center px-4 py-2 border border-l-0 border-gray-300 dark:border-gray-600 rounded-r-md bg-gray-50 dark:bg-gray-700/50 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">
						New Series
					</button>
				</div>
			</div>
			<div>
				<label for="series_index" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Series index</label>
				<input type="number" id="series_index" name="series_index" class="mt-1 block w-full rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500" placeholder="Book #">
			</div>
		</div>
		
		<div class="flex justify-between pt-6">
			<a href="index.html" class="bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-800 dark:text-gray-200 font-bold py-2 px-4 rounded">
				Back
			</a>
			<button type="submit" id="create-novel-submit-btn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded w-36 text-center">
				Create Novel
			</button>
		</div>
	</form>
</div>

<!-- New Series Modal -->
<div id="new-series-modal" class="hidden fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4">
	<div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md">
		<div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
			<h3 class="text-lg font-semibold">Create a New Series</h3>
			<button type="button" class="js-close-modal text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl">&times;</button>
		</div>
		<div class="p-6">
			<label for="new_series_title" class="block text-sm font-medium">Series Title</label>
			<input type="text" id="new_series_title" class="mt-1 block w-full rounded-md dark:bg-gray-700 dark:border-gray-600" required>
			<p id="new-series-error" class="text-red-500 text-xs mt-1 hidden"></p>
		</div>
		<div class="p-4 bg-gray-50 dark:bg-gray-900/50 flex justify-end gap-3">
			<button type="button" class="js-close-modal bg-gray-200 dark:bg-gray-700 px-4 py-2 rounded-md text-sm">Cancel</button>
			<button type="button" id="save-new-series-btn" class="bg-indigo-600 text-white px-4 py-2 rounded-md text-sm w-28">Save Series</button>
		</div>
	</div>
</div>

<script src="../src/js/create-novel.js"></script>
</body>
</html>

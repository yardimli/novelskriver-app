<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline';">
	<title>Create a New Novel</title>
	<link rel="stylesheet" href="styles.css">
</head>
<!-- MODIFIED: Removed theme-specific classes, daisyUI handles this -->
<body>
<div class="container mx-auto p-8 max-w-3xl">
	<div class="text-center mb-8">
		<h1 class="text-4xl font-bold">Create a new Novel</h1>
		<p class="text-lg text-base-content/70">Let's get your next masterpiece started.</p>
	</div>
	
	<!-- MODIFIED: Refactored form with DaisyUI card and form-control classes -->
	<form id="createNovelForm" class="card bg-base-200 shadow-xl">
		<div class="card-body space-y-4">
			<!-- Title -->
			<div class="form-control">
				<label for="title" class="label"><span class="label-text">Title</span></label>
				<div class="input-group">
					<input type="text" id="title" name="title" class="input input-bordered w-full" required>
					<button type="button" id="surprise-me-btn" class="btn btn-square">Surprise me</button>
				</div>
			</div>
			
			<!-- Author -->
			<div class="form-control">
				<label for="author" class="label"><span class="label-text">Author / Pen name</span></label>
				<div class="input-group">
					<input type="text" id="author" name="author" class="input input-bordered w-full" required>
					<!-- MODIFIED: Using DaisyUI dropdown component -->
					<div class="dropdown dropdown-end">
						<button type="button" id="author-dropdown-btn" tabindex="0" role="button" class="btn">
							Select
							<svg class="ml-1 h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
						</button>
						<ul id="author-list" tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52">
							<!-- Author list populated by JS -->
						</ul>
					</div>
				</div>
			</div>
			
			<!-- Series -->
			<div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-end">
				<div class="md:col-span-2 form-control">
					<label for="series_id" class="label"><span class="label-text">Series (optional)</span></label>
					<div class="input-group">
						<select id="series_id" name="series_id" class="select select-bordered w-full">
							<option value="">â€”</option>
							<!-- Series options loaded by JS -->
						</select>
						<button type="button" id="new-series-btn" class="btn">New Series</button>
					</div>
				</div>
				<div class="form-control">
					<label for="series_index" class="label"><span class="label-text">Series index</span></label>
					<input type="number" id="series_index" name="series_index" class="input input-bordered w-full" placeholder="Book #">
				</div>
			</div>
			
			<div class="card-actions justify-between pt-6">
				<a href="index.html" class="btn btn-ghost">Back</a>
				<button type="submit" id="create-novel-submit-btn" class="btn btn-primary w-36">Create Novel</button>
			</div>
		</div>
	</form>
</div>

<!-- MODIFIED: Refactored modal using DaisyUI classes -->
<dialog id="new-series-modal" class="modal">
	<div class="modal-box">
		<h3 class="font-bold text-lg">Create a New Series</h3>
		<div class="py-4">
			<label for="new_series_title" class="label"><span class="label-text">Series Title</span></label>
			<input type="text" id="new_series_title" class="input input-bordered w-full" required>
			<p id="new-series-error" class="text-error text-xs mt-1 hidden"></p>
		</div>
		<div class="modal-action">
			<form method="dialog" class="flex gap-3">
				<button class="btn js-close-modal">Cancel</button>
				<button type="button" id="save-new-series-btn" class="btn btn-primary w-28">Save Series</button>
			</form>
		</div>
	</div>
	<form method="dialog" class="modal-backdrop"><button>close</button></form>
</dialog>

<!-- NEW: Added universal theme script -->
<script src="../src/js/theme.js"></script>
<script src="../src/js/create-novel.js"></script>
</body>
</html>

<div class="py-1 px-6">
	<form id="expand-editor-form" class="space-y-3">
		<!-- Main Goal -->
		<div>
			<label for="expand-focus" class="label"><span class="label-text text-lg font-semibold">Primary Goal</span></label>
			<select id="expand-focus" name="focus" class="select select-bordered w-full">
				<option value="generic" selected>Generic Expansion</option>
				<option value="sensory">Add Sensory Details</option>
				<option value="feelings">Add Feelings / Emotions</option>
				<option value="introspection">Add Introspection / Inner Thoughts</option>
			</select>
			<p class="text-xs text-base-content/60 mt-1">Choose the main focus for the expansion.</p>
		</div>
		
		<!-- Length -->
		<div>
			<label for="expand-length" class="label"><span class="label-text text-lg font-semibold">Target Length</span></label>
			<select id="expand-length" name="expand_length" class="select select-bordered w-full">
				<option value="default" selected>Default</option>
				<option value="double">Double the length <span class="js-word-count-preview text-xs text-base-content/60"></span></option>
				<option value="triple">Triple the length <span class="js-word-count-preview text-xs text-base-content/60"></span></option>
			</select>
			<p class="text-xs text-base-content/60 mt-1">Set a target for how much the text should be expanded.</p>
		</div>
		
		<!-- Instructions -->
		<div>
			<label for="expand-instructions" class="label"><span class="label-text text-lg font-semibold">Additional Instructions</span></label>
			<textarea id="expand-instructions" name="instructions" class="textarea textarea-bordered w-full h-24 font-mono text-sm" placeholder="e.g., Make the tone more suspenseful."></textarea>
			<p class="text-xs text-base-content/60 mt-1">Add any other specific instructions for the AI.</p>
		</div>
		
		<!-- Context Options -->
		<div class="space-y-2">
			<h3 class="text-lg font-semibold">Contextual Information</h3>
			<p class="text-xs text-base-content/60 mb-2">Relevant contextual information is automatically sent to the AI for the best results.</p>
			
			<div class="js-codex-selection-container rounded-md border border-base-300 p-3">
				<p class="text-sm text-base-content/60">Loading codex entries...</p>
			</div>
		
		</div>
	</form>
	
	<div class="divider my-2"></div>
	
	<!-- MODIFIED: Wrapped Live Preview Section and made it hidden by default -->
	<div class="js-live-preview-section hidden">
		<h2 class="text-xl font-bold">Live Prompt Preview</h2>
		<p class="text-sm text-base-content/70 mb-4">This is the final prompt that will be sent to the AI, based on your settings above.</p>
		
		<!-- System Prompt Preview -->
		<div>
			<h3 class="text-lg font-semibold mt-4 font-mono text-success">System Prompt</h3>
			<pre class="bg-base-200 p-4 rounded-md text-xs whitespace-pre-wrap font-mono"><code class="js-preview-system"></code></pre>
		</div>
		
		<!-- User Prompt Preview -->
		<div>
			<h3 class="text-lg font-semibold mt-4 font-mono text-info">User Prompt</h3>
			<pre class="bg-base-200 p-4 rounded-md text-xs whitespace-pre-wrap font-mono"><code class="js-preview-user"></code></pre>
		</div>
		
		<!-- AI Prefix Preview -->
		<div>
			<h3 class="text-lg font-semibold mt-4 font-mono text-warning">AI Response Prefix</h3>
			<pre class="bg-base-200 p-4 rounded-md text-xs whitespace-pre-wrap font-mono"><code class="js-preview-ai">(Empty)</code></pre>
		</div>
	</div>
</div>
